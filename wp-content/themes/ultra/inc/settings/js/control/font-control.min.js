!function(t,n){var e={};t.controlConstructor["siteorigin-font"]=t.Control.extend({ready:function(){var o=this,i=o.container.find("select.font"),a=o.container.find("select.font-variant"),s=o.container.find("select.font-subset"),r=!1;i.on("change",(function(){var t=n(this).find("option:selected");a.empty().val(""),s.empty().val(""),void 0!==t.data("variants")?(a.append(n("<option></option>")).val(""),n.each(t.data("variants").split(","),(function(t,e){a.append(n("<option></option>").html(e))})),a.val("regular"),a.find("option").length>2?a.parent().show():a.parent().hide()):a.parent().hide(),void 0!==t.data("subsets")?(s.append(n("<option></option>")),n.each(t.data("subsets").split(","),(function(t,e){s.append(n("<option></option>").html(e))})),s.val("latin"),s.find("option").length>2?s.parent().show():s.parent().hide()):s.parent().hide()}));if(o.container.find("select").on("change",(function(){if(r){var t={};t.font=i.val(),t.webfont=i.find("option:selected").data("webfont"),t.category=i.find("option:selected").data("category"),t.variant=a.val(),t.subset=s.val(),o.setting.set(JSON.stringify(t))}})),""!==o.setting()){var c=JSON.parse(o.setting());i.val(c.font).trigger("change"),a.val(c.variant),s.val(c.subset)}else i.trigger("change");var l=null;t.section(o.section()).container.on("expanded",(function(){if(null===l){var t=null;i.on("chosen:ready",(function(o,i){var a=i.chosen.dropdown,s=a.find(".chosen-results");a.find(".chosen-results").on("scroll",(function(){clearTimeout(t),t=setTimeout((function(){var t,o,i=[];if(s.find("li").each((function(){var a=n(this),r=a.position().top;void 0!==a.attr("style")&&-1===a.attr("style").indexOf("__websafe")&&r>-10&&r<s.outerHeight()+30&&(o=a.attr("style").match(/font-family: ([^,]+),.*;/))&&(t=o[1].replace(/'/g,"").trim(),void 0===e[t]&&(i.push(t),e[t]=!0))})),i.length>0){var a="//fonts.googleapis.com/css";a+="?family="+i.join("|").replace(" ","+"),n("<link/>",{rel:"stylesheet",type:"text/css",href:a+="&text=0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"}).appendTo("head")}}),500)})),setTimeout((function(){s.trigger("scroll")}),500),i.chosen.search_field.on("keyup",(function(){setTimeout((function(){s.trigger("scroll")}),500)}))})).on("chosen:showing_dropdown",(function(t,n){n.chosen.dropdown.find(".chosen-results").trigger("scroll")})).chosen({allow_single_deselect:!0,search_contains:!0}),l=!0}r=!0}))}})}(wp.customize,jQuery);